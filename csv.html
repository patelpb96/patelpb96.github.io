<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elegant CSV Viewer</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for a polished look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* A light gray background */
        }
        /* Table animation */
        #table-container {
            transition: opacity 0.5s ease-in-out;
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">

    <div class="w-full max-w-6xl mx-auto bg-white rounded-2xl shadow-2xl shadow-blue-100/50 overflow-hidden">
        <header class="p-6 sm:p-8 bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
            <h1 class="text-2xl sm:text-3xl font-bold">CSV Data Report</h1>
            <p class="mt-2 text-blue-100">The table below displays data loaded directly from our server.</p>
        </header>

        <main class="p-6 sm:p-8">
            <!-- Table Display Area -->
            <div class="overflow-x-auto bg-gray-50 p-4 rounded-xl border border-gray-200">
                <div id="table-container" class="min-h-[300px] flex items-center justify-center">
                    <!-- Placeholder message -->
                    <div id="placeholder" class="text-center text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h5M20 20v-5h-5" />
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4 9a8 8 0 0114.24-4.958" />
                          <path stroke-linecap="round" stroke-linejoin="round" d="M20 15a8 8 0 01-14.24 4.958" />
                        </svg>
                        <p class="mt-4 font-medium">Loading data from server...</p>
                    </div>
                    <!-- Table will be injected here by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
        const tableContainer = document.getElementById('table-container');
        const placeholder = document.getElementById('placeholder');

        // --- IMPORTANT ---
        // Replace this URL with the actual path to your CSV file on the server.
        // I've used a sample public CSV for demonstration purposes.
        const csvUrl = 'https://raw.githubusercontent.com/plotly/datasets/master/auto-mpg.csv';

        /**
         * Fetches and displays the CSV data when the page loads.
         */
        document.addEventListener('DOMContentLoaded', () => {
            fetch(csvUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network response was not ok: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(csvText => {
                    displayCSV(csvText);
                })
                .catch(error => {
                    console.error('Error fetching or parsing CSV:', error);
                    placeholder.innerHTML = `<p class="text-red-500 font-semibold">Error: Could not load data.</p><p class="text-xs text-gray-500 mt-2">${error.message}</p>`;
                });
        });

        /**
         * Parses CSV text and displays it as an HTML table.
         * @param {string} csvText The raw text content of the CSV file.
         */
        function displayCSV(csvText) {
            // Clear previous content and hide placeholder
            tableContainer.innerHTML = '';
            tableContainer.style.opacity = 0;
            if (placeholder) placeholder.style.display = 'none';

            // More robust CSV parsing to handle quoted fields
            const rows = [];
            const lines = csvText.trim().split('\n');
            for (const line of lines) {
                // This regex handles commas inside of double-quoted strings
                rows.push(line.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g).map(cell => cell.replace(/^"|"$/g, '')));
            }
            
            if (rows.length === 0) {
                tableContainer.innerHTML = '<p class="text-center text-red-500">CSV file is empty or invalid.</p>';
                tableContainer.style.opacity = 1;
                return;
            }

            const table = document.createElement('table');
            table.className = 'min-w-full divide-y divide-gray-200';

            // Create table header
            const thead = document.createElement('thead');
            thead.className = 'bg-gray-100';
            const headerRow = document.createElement('tr');
            const headers = rows[0];
            headers.forEach(headerText => {
                const th = document.createElement('th');
                th.scope = 'col';
                th.className = 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider';
                th.textContent = headerText.trim();
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);

            // Create table body
            const tbody = document.createElement('tbody');
            tbody.className = 'bg-white divide-y divide-gray-200';
            const dataRows = rows.slice(1);
            dataRows.forEach(rowData => {
                if (rowData.every(cell => cell.trim() === '')) return; // Skip empty rows
                const tr = document.createElement('tr');
                tr.className = 'hover:bg-gray-50 transition-colors';
                rowData.forEach(cellData => {
                    const td = document.createElement('td');
                    td.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-700';
                    td.textContent = cellData.trim();
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
            table.appendChild(tbody);

            tableContainer.appendChild(table);
            
            // Fade in the new table
            setTimeout(() => {
                tableContainer.style.opacity = 1;
            }, 50);
        }
    </script>

</body>
</html>
